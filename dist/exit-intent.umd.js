!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ExitIntent=t()}(this,function(){"use strict";function e(e,n,o){t(e,r,n,o),"DOMMouseScroll"==r&&t(e,"MozMousePixelScroll",n,o)}function t(e,t,n,i){e[o](Z+t,"wheel"==r?n:function(e){!e&&(e=window.event);var t={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,deltaY:0,deltaZ:0,clientX:e.clientX,clientY:e.clientY,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){e.stopImmediatePropagation&&e.stopImmediatePropagation()}};return"mousewheel"==r?(t.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(t.deltaX=-.025*e.wheelDeltaX)):t.deltaY=e.detail,n(t)},i||!1)}function n(e,t,n,o){e[i](Z+t,n,o||!1)}var o,i,r,u=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},c="object"==typeof a&&a&&a.Object===Object&&a,l="object"==typeof self&&self&&self.Object===Object&&self,f=c||l||Function("return this")(),d=function(){return f.Date.now()},s=f.Symbol,v=Object.prototype,p=v.hasOwnProperty,m=v.toString,h=s?s.toStringTag:void 0,y=function(e){var t=p.call(e,h),n=e[h];try{e[h]=void 0;var o=!0}catch(e){}var i=m.call(e);return o&&(t?e[h]=n:delete e[h]),i},w=Object.prototype.toString,g=function(e){return w.call(e)},b="[object Null]",x="[object Undefined]",E=s?s.toStringTag:void 0,S=function(e){return null==e?void 0===e?x:b:E&&E in Object(e)?y(e):g(e)},T=function(e){return null!=e&&"object"==typeof e},j="[object Symbol]",M=function(e){return"symbol"==typeof e||T(e)&&S(e)==j},D=NaN,O=/^\s+|\s+$/g,P=/^[-+]0x[0-9a-f]+$/i,I=/^0b[01]+$/i,k=/^0o[0-7]+$/i,L=parseInt,A=function(e){if("number"==typeof e)return e;if(M(e))return D;if(u(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=u(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(O,"");var n=I.test(e);return n||k.test(e)?L(e.slice(2),n?2:8):P.test(e)?D:+e},_="Expected a function",W=Math.max,X=Math.min,Y=function(e,t,n){function o(t){var n=s,o=v;return s=v=void 0,w=t,m=e.apply(o,n)}function i(e){return w=e,h=setTimeout(c,t),g?o(e):m}function r(e){var n=e-w,o=t-(e-y);return b?X(o,p-n):o}function a(e){var n=e-y,o=e-w;return void 0===y||n>=t||n<0||b&&o>=p}function c(){var e=d();if(a(e))return l(e);h=setTimeout(c,r(e))}function l(e){return h=void 0,x&&s?o(e):(s=v=void 0,m)}function f(){var e=d(),n=a(e);if(s=arguments,v=this,y=e,n){if(void 0===h)return i(y);if(b)return h=setTimeout(c,t),o(y)}return void 0===h&&(h=setTimeout(c,t)),m}var s,v,p,m,h,y,w=0,g=!1,b=!1,x=!0;if("function"!=typeof e)throw new TypeError(_);return t=A(t)||0,u(n)&&(g=!!n.leading,p=(b="maxWait"in n)?W(A(n.maxWait)||0,t):p,x="trailing"in n?!!n.trailing:x),f.cancel=function(){void 0!==h&&clearTimeout(h),w=0,s=y=v=h=void 0},f.flush=function(){return void 0===h?m:l(d())},f},$="Expected a function",z=function(e,t,n){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError($);return u(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),Y(e,t,{leading:o,maxWait:t,trailing:i})},N=function(e){return e&&e.__esModule?e.default:e}(function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return!("undefined"==typeof window||!("ontouchstart"in window||window.DocumentTouch&&"undefined"!=typeof document&&document instanceof window.DocumentTouch))||!("undefined"==typeof navigator||!navigator.maxTouchPoints&&!navigator.msMaxTouchPoints)},e.exports=t.default})),F=e,U=e,V=function(e,t,o){n(e,r,t,o),"DOMMouseScroll"==r&&n(e,"MozMousePixelScroll",t,o)},Z="";!function(e,t){e&&e.addEventListener?(o="addEventListener",i="removeEventListener"):(o="attachEvent",i="detachEvent",Z="on"),r=t?"onwheel"in t.createElement("div")?"wheel":void 0!==t.onmousewheel?"mousewheel":"DOMMouseScroll":"wheel"}("undefined"!=typeof window&&window,"undefined"!=typeof document&&document),F.addWheelListener=U,F.removeWheelListener=V;!function(){function e(e){this.value=e}function t(t){function n(i,r){try{var u=t[i](r),a=u.value;a instanceof e?Promise.resolve(a.value).then(function(e){n("next",e)},function(e){n("throw",e)}):o(u.done?"return":"normal",u.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}(i=i.next)?n(i.key,i.arg):r=null}var i,r;this._invoke=function(e,t){return new Promise(function(o,u){var a={key:e,arg:t,resolve:o,reject:u,next:null};r?r=r.next=a:(i=r=a,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}();var q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},B=!N();return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=q({},{debug:!1,maxDisplays:99999,eventThrottle:200,showAfterInactiveSecondsDesktop:60,showAfterInactiveSecondsMobile:40,showAgainAfterSeconds:10,onExitIntent:function(){}},e),n=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];if(t.debug){var i;(i=console).log.apply(i,["[exit-intent-mobile]"].concat(n))}},o=0,i=z(function(){o<t.maxDisplays&&(n("display onExitIntent",++o),t.onExitIntent(),o>=t.maxDisplays&&d())},1e3*t.showAgainAfterSeconds,{trailing:!1}),r=void 0;B&&(n("register mouseleave for desktop"),r=document.body.addEventListener("mouseleave",z(function(){n("mouseleave"),i()},t.eventThrottle),!1));var u=B?t.showAfterInactiveSecondsDesktop:t.showAfterInactiveSecondsMobile;n("timeoutOnDevice",u);var a=void 0,c=function(){void 0!==u?(void 0!==a&&(n("clearTimeout()"),window.clearTimeout(a)),a=window.setTimeout(function(){n("display after timeout"),i()},1e3*u)):n("display disabled")};c();var l=[],f=function(e,o){n("registering event for restartTimer",e,o);var i=o.addEventListener(e,z(function(e){n("throttled listener",e),c()},t.eventThrottle),!1);return l.push({event:e,listener:i,target:o}),i};B&&(f("scroll",window),f("mousemove",window),U(window,function(e){z(function(e){n("throttled wheel listener",e),c()},t.eventThrottle)})),N&&(f("touchstart",document.body),f("touchend",document.body),f("touchmove",document.body));var d=function(){n("removeEvents",o),r&&(document.body.removeEventListener("mouseleave",r),V(window,function(){n("removeWheelListener")})),l.forEach(function(e){var t=e.event,n=e.listener;e.target.removeEventListener(t,n)})};return d}});
